$(function(){function t(){v.click(function(){var t=f.val();""===t?(console.log("请输入页数"),alert("请输入页数")):n(c,i,t)})}function n(n,o,c){var i="meterCode="+n+"&userAddress="+o+"&page="+c;console.log(i),$.ajax({type:"POST",url:common_url+"/watersys/getMeterInfo.do",dataType:"json",context:document.body,data:i,timeout:5e3,success:function(n){0===n.msg?(console.log(n),a(n,n.dataList),e(n.currentPage,n.totalPage),t()):(u.css("display","none"),alert("未查询到此表具的相关信息！请检查输入！"),console.log("未返回任何数据！"))},error:function(){console.log("ajax error")}})}function a(t,n){u.css("display","block"),p.css("display","none"),d.empty();for(var a=0;a<n.length;a++)!function(t){var e=$("<tr><td>"+(t+1)+"</td><td>"+n[a].meterCode+"</td><td>"+n[a].earlyAmount+"</td><td>"+n[a].nowAmount+"</td><td>"+n[a].price+"</td><td>"+n[a].priceType+"</td><td>"+n[a].installAddress+"</td></tr>");d.append(e)}(a)}function e(t,n){if(g.empty(),n<=5){for(var a=1;a<=n;a++)a===t?g.append($('<li class="active"><a class="pagination-index">'+a+"</a></li>")):g.append($('<li><a class="pagination-index">'+a+"</a></li>"));g.prepend($('<li><a class="pre-page">&laquo;</a></li>')),g.append($('<li><a class="next-page">&raquo;</a></li>'))}o(t,n)}function o(t,a){for(var e=$(".pagination-index"),o=0;o<e.length;o++)!function(a){$(e[a]).click(function(a){var e=parseInt($(a.target).text());console.log(e),console.log(t),e===t||n(c,i,e)})}(o);$(".pre-page").click(function(){1===t||n(c,i,t-1)}),$(".next-page").click(function(){t===a||n(c,i,t+1)})}var c,i,l=$(".device-number"),s=$(".install-address"),r=$(".search-btn"),d=($(".search-tip"),$(".year-tbody")),p=($(".line-no-data"),$(".table-no-data")),u=$(".table-content"),g=$(".pagination"),f=$(".switch-input"),v=$(".switch-btn");r.click(function(){c=l.val(),i=s.val(),n(c,i,1)})});