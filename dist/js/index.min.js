$(function(){function t(){v.click(function(){var t=y.val();""===t?(console.log("请输入页数"),alert("请输入页数")):e(t,0)}),x.attr("href",common_url+"/watersys/watersysDataTOExcel.do")}function e(e,a){var l="index="+e+"&flag="+a;console.log(l),$.ajax({type:"POST",url:common_url+"/watersys/getWatersysDataByPage.do",data:l,dataType:"json",timeout:1e5,context:document.body,success:function(e){0===e.msg?(console.log(e),o(e),n(e),r(e.currentpage,e.totalpage),t()):console.log("ajax 返回空")},error:function(t){console.log("ajax error")}})}function a(t){var e=sessionStorage.getItem(t);return e||!1}function o(t){d.text(t.totalAmount+"方"),p.text(t.totalPrice+"元"),u.text(t.userNum)}function n(t){var e=t.title,a=t.pageData;g.empty(),m.empty(),h.empty(),g.append($("<th>序号</th><th>"+e.waterMeterNum+"</th><th>"+e.oldTotal+"</th><th>"+e.nowTotal+"</th><th>"+e.totalUse+"</th><th>"+e.meterUserName+"</th><th>"+e.meterUserId+"</th><th>"+e.meterUserAddress+"</th><th>"+e.date1+"</th><th>"+e.date2+"</th>")),console.log(a),console.log(t.currentpage);for(var o=0;o<a.length;o++){var n=a[o],r=o+1+13*(t.currentpage-1);m.append($("<tr><td>"+r+"</td><td>"+n.waterMeterNum+"</td><td>"+n.oldTotal+"</td><td>"+n.nowTotal+"</td><td>"+n.totalUse+"</td><td>"+n.meterUserName+"</td><td>"+n.meterUserId+"</td><td>"+n.meterUserAddress+"</td><td>"+n.date1+"</td><td>"+n.date2+"</td></tr>"))}}function r(t,e){if(c=t,f.empty(),e<=7){for(var a=1;a<=e;a++)a===t?f.append($('<li class="active"><a class="pagination-index">'+a+"</a></li>")):f.append($('<li><a class="pagination-index">'+a+"</a></li>"));f.prepend($('<li><a class="pre-page">&laquo;</a></li>')),f.append($('<li><a class="next-page">&raquo;</a></li>')),s(t,e)}else l(t,e)}function l(t,e){}function s(t,a){for(var o=$(".pagination-index"),n=0;n<o.length;n++)!function(a){$(o[a]).click(function(a){var o=parseInt($(a.target).text());console.log(o),console.log(t),o===t||e(o,0)})}(n);$(".pre-page").click(function(){1===t||e(t-1,0)}),$(".next-page").click(function(){t===a||e(t+1,0)})}var c,i=$(".select-factory-wrapper"),d=$(".water-value"),p=$(".money-value"),u=$(".user-value"),g=$(".header-class"),h=$(".table-no-data"),m=$(".month-tbody"),f=$(".pagination"),y=$(".switch-input"),v=$(".switch-btn"),x=$(".download");console.log(a("permission")),function(){switch(a("permission")){case"1":e(1,1);break;default:i.css("display","none"),e(1,0)}}()});