$(function(){function t(t,r){var l="startYear="+(t||(new Date).getFullYear())+"&endYear="+(r||(new Date).getFullYear());console.log(l),$.ajax({type:"POST",url:common_url+"/watersys/getUserDataByYear.do",dataType:"json",context:document.body,data:l,timeout:5e3,success:function(t){if(0===t.msg){console.log(t),o=[],n=[];for(var r=t.dataList,l=t.dataList.length,i=0;i<l;i++)o.push(parseInt(r[i].year)),n.push(parseInt(r[i].amountNum));o.push(""),o.unshift(""),n.push(""),n.unshift(""),console.log(o),console.log(n),c.css("display","none"),u.css("display","none"),a(),e(t,t.dataList)}else alert("您所查询的年份没有数据"),console.log("未返回任何数据！")},error:function(){console.log("ajax error")}})}function e(t,e){d.empty();for(var a=0;a<e.length;a++)!function(t){var o=$("<tr><td>"+t+"</td><td>"+e[a].year+"</td><td>"+e[a].userNum+"</td><td>"+e[a].amountNum+"</td><td>"+e[a].priceNum+"</td></tr>");d.append(o)}(a);d.append($("<tr><td>总计</td><td></td><td>"+t.userTotal+"</td><td>"+t.amountTotal+"</td><td>"+t.priceTotal+"</td></tr>"))}function a(){var t=echarts.init(document.getElementById("year-line-wrapper")),e={backgroundColor:"#fff",xAxis:{data:o,boundaryGap:!1,axisLine:{lineStyle:{color:"#dcdcdc",width:2}},axisTick:{inside:!0,alignWithLabel:!0},axisLabel:{textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{color:["#ededed"]}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{color:["#ededed"],type:"doted"}}},series:[{type:"line",data:n,itemStyle:{normal:{color:"#529fff"}},lineStyle:{normal:{color:"#529fff"}}}],tooltip:{trigger:"item",formatter:function(t,e,a){console.log(t);var o;return o="0"===t.name[0]?t.name[1]+"年":t.name+"年",o+="<br/>"+t.value+"方"},backgroundColor:"#529fff"}};t.setOption(e)}var o=[],n=[],r=$(".start-year"),l=$(".end-year"),i=($(".year-item"),$(".select-year-wrapper"),$(".search-btn")),s=$(".search-tip"),d=$(".year-tbody"),c=$(".line-no-data"),u=$(".table-no-data");i.click(function(){var e=r.val(),a=l.val();""===e||""===a?(s.text("年份输入不能为空！"),s.css("display","inline-block")):t(e,a)})});